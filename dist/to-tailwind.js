"use strict";var t=require("selector-specificity"),e=require("fs");function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),l=new k(n||[]);return o(a,"_invoke",{value:S(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var d={};function h(){}function p(){}function b(){}var g={};u(g,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==e&&n.call(y,a)&&(g=y);var m=b.prototype=h.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,a,l){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,l)}),(function(t){r("throw",t,a,l)})):e.resolve(s).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=j(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=b,o(m,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:p,configurable:!0}),p.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),u(m,c,"Generator"),u(m,a,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u={area:null,base:null,br:null,col:null,embed:null,hr:null,img:null,input:null,link:null,meta:null,param:null,source:null,track:null,wbr:null},s=u,f=/<[\s\S]*?>[^<]*/g,d="<!DOCTYPE html>",h=u,p=function(t){var e="",r=t.attrs,n=t.tagName,o=t.children,i=t.tailwindExp,a=Object.keys(r),l=a.length||i?" ".concat(g(r,a,i)):"";if(e+="<".concat(n).concat(l,">"),!h.hasOwnProperty(n)){var c=o.length?v(t):"";e+="".concat(c,"</").concat(n,">")}return e},b=function(t){return t.text},g=function(t,e,r){for(var n="",o=0,i=e.length;o<i;o++){var a=e[o],l=t[a];"class"!==a&&(n+="".concat(a,'="').concat(l,'" '))}return r&&(n+='class="'.concat(r,'"')),n},v=function(t){for(var e="",r=t.children,n=0,o=r.length;n<o;n++){var i=r[n];"tag"===i.type?e+=p(i):e+=b(i)}return e},y=t,m={id:function(t,e){return t.filter((function(t){return t.attrs.id===e}))},class:function(t,e){return t.filter((function(t){var r,n;return null===(r=t.attrs)||void 0===r||null===(n=r.class)||void 0===n?void 0:n.hasOwnProperty(e)}))},attribute:function(t,e,r){return t.filter((function(t){return t.attrs[e]===r}))},universal:function(t){return t},element:function(t,e){return t.filter((function(t){return t.tagName===e}))},child:function(t){for(var e=[],r=0,n=t.length;r<n;r++)Array.prototype.push.apply(e,t[r].children);return e},sibling:function(t){for(var e=[],r=0,n=t.length;r<n;r++)for(var o=t[r],i=o.parent.children,a=i.indexOf(o)+1,l=i.length;a<l;a++)e.push(i[a]);return e},descendant:function(t){for(var e=[],r=function t(e,r){for(var n=0,o=r.length;n<o;n++){var i=r[n];if("text"!==i.type){e.push(i);var a=i.children;a.length&&t(e,a)}}},n=0,o=t.length;n<o;n++){r(e,t[n].children)}return e},adjacent:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r],i=o.parent.children,a=i.indexOf(o),l=i[a+1];l&&e.push(l)}return e},"pseudo-class":function(t,e,r){var n=w[e];return n?n(t,r):t},"pseudo-element":function(){}},w={"first-of-type":function(t){return[t[0]]},"last-of-type":function(t){return[t[t.length-1]]}},x=function t(e,r){for(var n=e,o=y.getNodes(r),i=0,l=o.length;i<l;i++){var c=o[i],u=c.type,s=c.name,f=c.value;if("combine"===u){var d=r.indexOf(",");n=a(new Set([].concat(a(n),a(t(e,r.slice(d+1))))));break}if(!(n=m[u](n,s,f,c)||[]).length)break}return n},S={width:"w",height:"h",opacity:"opacity",padding:"p","padding-top":"pt","padding-right":"pr","padding-bottom":"pb","padding-left":"pl",margin:"m","margin-top":"mt","margin-right":"mr","margin-bottom":"mb","margin-left":"ml",top:"t",right:"r",bottom:"b",left:"l",border:"border","border-radius":"rounded","border-width":"border","border-top-width":"border-t","border-right-width":"border-r","border-bottom-width":"border-b","border-left-width":"border-l","border-color":"border","border-top-color":"border-t","border-right-color":"border-r","border-bottom-color":"border-b","border-left-color":"border-l","border-top-style":"border-t","border-right-style":"border-r","border-bottom-style":"border-b","border-left-style":"border-l","border-top":"border-t","border-right":"border-r","border-bottom":"border-b","border-left":"border-l",color:"text","font-size":"text","font-family":"font","background-color":"bg","min-width":"min-w","line-height":"leading","flex-wrap":"wrap","z-index":"z","font-weight":{100:"font-thin",200:"font-extra-light",300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold",900:"font-black"},position:{static:"static",absolute:"absolute",relative:"relative",sticky:"sticky",fixed:"fixed"},cursor:{auto:"cursor-auto",default:"cursor-default",pointer:"cursor-pointer",wait:"cursor-wait",text:"cursor-text",move:"cursor-move",help:"cursor-help","not-allowed":"cursor-not-allowed"},display:{block:"block","inline-block":"inline-block",inline:"inline",flex:"flex","inline-flex":"inline-flex",table:"table","inline-table":"inline-table","table-caption":"table-caption","table-cell":"table-cell","table-column":"table-column","table-column-group":"table-column-group","table-footer-group":"table-footer-group","table-header-group":"table-header-group","table-row-group":"table-row-group","table-row":"table-row","flow-root":"flow-root",grid:"grid","inline-grid":"inline-grid",contents:"contents","list-item":"list-item",hidden:"none"},float:{right:"float-right",left:"float-left",none:"float-none"},"justify-content":{"flex-start":"justify-start","flex-end":"justify-end",center:"justify-center","space-between":"justify-between","space-around":"justify-around","space-evenly":"justify-evenly"},"align-items":{"flex-start":"items-start","flex-end":"items-end",center:"items-center",baseline:"items-baseline",stretch:"items-stretch"},"flex-direction":{row:"flex-row","row-reverse":"flex-row-reverse",column:"flex-col","column-reverse":"flex-col-reverse"},"box-sizing":{"border-box":"box-border","content-box":"box-content"},"white-space":{normal:"white-space-normal",nowrap:"white-space-nowrap",pre:"white-space-pre","pre-line":"white-space-pre-line","pre-wrap":"white-space-pre-wrap"},overflow:{auto:"overflow-auto",hidden:"overflow-hidden",visible:"overflow-visible",scroll:"overflow-scroll"},"overflow-x":{auto:"overflow-x-auto",hidden:"overflow-x-hidden",visible:"overflow-x-visible",scroll:"overflow-x-scroll"},"overflow-y":{auto:"overflow-y-auto",hidden:"overflow-y-hidden",visible:"overflow-y-visible",scroll:"overflow-y-scroll"},visibility:{visible:"visible",hidden:"invisible",collapse:"collapse"},"text-align":{left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"},"background-position":{bottom:"bg-bottom",center:"bg-center",left:"bg-left","left bottom":"bg-left-bottom","left top":"bg-left-top",right:"bg-right","right bottom":"bg-right-bottom","right top":"bg-right-top",top:"bg-top"},"background-repeat":{repeat:"bg-repeat","no-repeat":"bg-no-repeat","repeat-x":"bg-repeat-x","repeat-y":"bg-repeat-y",round:"bg-repeat-round",space:"bg-repeat-space"},"background-size":{auto:"bg-auto",cover:"bg-cover",contain:"bg-contain"},"text-decoration":{underline:"underline","line-through":"line-througn",none:"no-underline"},"border-style":{solid:"border-solid",dashed:"border-dashed",dotted:"border-dotted",double:"border-double",hidden:"border-hidden",none:"border-none"},"vertical-align":{baseline:"align-baseline",top:"align-top",middle:"align-middle",bottom:"align-bottom","text-top":"align-text-top","text-bottom":"align-text-bottom",sub:"align-sub",super:"align-super"},"font-variant-numeric":{normal:"normal-nums",ordinal:"ordinal","slashed-zero":"slashed-zero","lining-nums":"lining-nums","oldstyle-nums":"oldstyle-nums","proportional-nums":"proportional-nums","tabular-nums":"tabular-nums","diagonal-fractions":"diagonal-fractions","stacked-fractions":"stacked-fractions"},"list-style-type":{none:"list-none",disc:"list-disc",decimal:"list-decimal"}},j=S,E=function(t,e){var r="",n=t.split(" "),o=n.length;if(1===o)r="".concat(e,"-[").concat(n[0],"]");else if(2===o){var a=i(n,2),l=a[0],c=a[1];r="".concat(e,"y-[").concat(l,"] ").concat(e,"x-[").concat(c,"]")}else if(3===o){var u=i(n,3),s=u[0],f=u[1],d=u[2];r="".concat(e,"t-[").concat(s,"] ").concat(e,"x-[").concat(f,"] ").concat(e,"b-[").concat(d,"]")}else{var h=i(n,4),p=h[0],b=h[1],g=h[2],v=h[3];r="".concat(e,"t-[").concat(p,"] ").concat(e,"r-[").concat(b,"] ").concat(e,"b-[").concat(g,"] ").concat(e,"l-[").concat(v,"]")}return r},O=function(t,e){var r="",n=t.split(" "),o=n.length,a=i(n,3),l=a[0],c=a[1],u=a[2];return o>=1?r+="".concat(e,"-").concat(l):o>=2?r+="border-".concat(c):3===o&&(r+="border-".concat(u)),r},k={stylesMap:S,straregyOfFlexibleProps:{margin:function(t){return E(t,j.margin)},padding:function(t){return E(t,j.padding)},border:function(t){return O(t,j.border)},"border-top":function(t){return O(t,j["border-top"])},"border-right":function(t){return O(t,j["border-right"])},"border-bottom":function(t){return O(t,j["border-bottom"])},"border-left":function(t){return O(t,j["border-left"])},"border-width":function(t){return E(t,"".concat(j["border-width"],"-"))},"border-style":function(t){},"border-color":function(t){return E(t,"".concat(j["border-color"],"-"))}}},L=k.stylesMap,N=k.straregyOfFlexibleProps,T={deepClone:function(t){return JSON.parse(JSON.stringify(t))},filterNodes:x,styleToTailwind:function(t,e,r,o){var i="",a=L[t];if(a){var l="object"===n(a),c=l?t:a;if(l)i+="".concat(a[e]);else{var u=N[t];i+=u?u(e=e.replace(/\s{2,}/," ")):"".concat(a,"-[").concat(e,"]")}o[c]={tailwindExp:i,specificity:r}}else console.log(t)},classMetadataToTailwindExp:function(t){var e="";for(var r in t)e+="".concat(t[r].tailwindExp," ");return e.slice(0,-1)}},P={parse:function(t){(t=t.trim()).startsWith(d)&&(t=t.slice(d.length));for(var e={type:"root",attrs:{},parent:null,tagName:null,children:[]},r=t.match(f),n=[],o=e,i=function(){var t=r[a].trim();if(t.startsWith("</"))o=o.parent;else{var e=(t=t.slice(1)).match(/[^\s>]*/)[0],i={},l={type:"tag",attrs:i,parent:o,tagName:e,children:[]};if(">"!==(t=t.slice(e.length).trimStart()))if(t.startsWith(">"))l.children.push({type:"text",text:t.slice(1).trimStart()});else{t.replace(/\s*(.*?)=['"]\s*([\s\S]*?)\s*['"]/g,(function(t,e,r){var n={};if("style"===e)r.replace(/\s*(.*?)\s*:\s*(.*?)\s*[;]/g,(function(t,e,r){n[e]=r}));else if("class"===e)for(var o=r.split(/\s+/),a=0,l=o.length;a<l;a++)n[o[a]]=null;i[e]=Object.keys(n).length?n:r}));var c=t.match(/>([\s\S]*)/)[1];c&&l.children.push({type:"text",text:c})}o.children.push(l),n.push(l),s.hasOwnProperty(e)||(o=l)}},a=0,l=r.length;a<l;a++)i();return{ast:e,nodes:n}},stringify:v},_=t,A=e.promises,F=A.readFile,G=A.writeFile,I=T.deepClone,M=T.filterNodes,z=T.styleToTailwind,C=T.classMetadataToTailwindExp,W=/}?\s*([\s\S]*?)\s*{\s*([\s\S]*?)\s*}/g,Y=function(){var t,e=(t=r().mark((function t(e,n,o){var i,a,l,c,u,s,f,d,h,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(n,"utf-8");case 2:return i=t.sent,t.next=5,F(e,"utf-8");case 5:for(a=t.sent,i=i.replace(/\/\*[\s\S]*?\*\//g,""),a=a.replace(/<!--[\s\S]*?-->/g,""),l=P.parse(a),c=l.ast,u=l.nodes,i.replace(W,(function(t,e,r){if(r){var n=M(u,e);if(n.length){var o=_.getSpecificity(e),i={};r.replace(/\s*(.*?)\s*:\s*([^;]*);?/g,(function(t,e,r){z(e,r,o,i)}));for(var a=0,l=n.length;a<l;a++){var c=I(i),s=n[a],f=s.classMetadata;if(f)for(var d in c){var h=c[d];(!f[d]||f[d].specificity<=h.specificity)&&(f[d]=h)}else s.classMetadata=c}}}})),s=0,f=u.length;s<f;s++)d=u[s],(h=d.classMetadata)&&(d.tailwindExp=C(h));return c.children[0].children[0].children.push({type:"tag",attrs:{src:"https://cdn.tailwindcss.com"},parent:c.children[0].children[0],tagName:"script",children:[]}),p=P.stringify(c),t.next=15,G(o,p);case 15:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function l(t){o(a,n,i,l,c,"next",t)}function c(t){o(a,n,i,l,c,"throw",t)}l(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}();module.exports=Y;
