"use strict";var t=require("fs"),e=require("selector-specificity"),r=require("css-shorthand-parser");function n(){n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),l=new E(n||[]);return o(a,"_invoke",{value:k(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function p(){}function h(){}function g(){}var b={};s(b,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(L([])));m&&m!==e&&r.call(m,a)&&(b=m);var y=g.prototype=p.prototype=Object.create(b);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,l){var c=f(t[o],t,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(u).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=j(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return h.prototype=g,o(y,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:h,configurable:!0}),h.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(y),s(y,c,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function l(t){i(a,n,o,l,c,"next",t)}function c(t){i(a,n,o,l,c,"throw",t)}l(void 0)}))}}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u,f={area:null,base:null,br:null,col:null,embed:null,hr:null,img:null,input:null,link:null,meta:null,param:null,source:null,track:null,wbr:null},d=f,p=/<[\s\S]*?>[^<]*/g,h="<!DOCTYPE html>",g=f,b=function(t){var e="",r=t.attrs,n=t.tagName,o=t.children,i=t.tailwindExp,a=Object.keys(r),l=a.length||i?" ".concat(m(r,a,i)):"";if(e+="<".concat(n).concat(l,">"),!g.hasOwnProperty(n)){var c=o.length?y(t):"";e+="".concat(c,"</").concat(n,">")}return e},v=function(t){return t.text},m=function(t,e,r){for(var n="",o=0,i=e.length;o<i;o++){var a=e[o],l=t[a];"class"!==a&&(n+="".concat(a,'="').concat(l,'" '))}return r&&(n+='class="'.concat(r," "),t.class&&(n+="".concat(Object.keys(t.class).join())),n+='"'),n},y=function(t){for(var e="",r=t.children,n=0,o=r.length;n<o;n++){var i=r[n];"tag"===i.type?e+=b(i):e+=v(i)}return e},w={parse:function(t){(t=t.trim()).startsWith(h)&&(t=t.slice(h.length));for(var e={type:"root",attrs:{},parent:null,tagName:null,children:[]},r=t.match(p),n=[],o=e,i=function(){var t=r[a].trim();if(t.startsWith("</")){var e;o=o.parent;var i=null===(e=t.match(/<\/[a-z]+>\s*(.+)\s*/))||void 0===e?void 0:e[1];i&&o.children.push({type:"text",text:i})}else{var l=(t=t.slice(1)).match(/[^\s>]*/)[0],c={},s={type:"tag",attrs:c,parent:o,tagName:l,children:[]};if(">"!==(t=t.slice(l.length).trimStart()))if(t.startsWith(">"))s.children.push({type:"text",text:t.slice(1).trimStart()});else{t.replace(/\s*(.*?)=['"]\s*([\s\S]*?)\s*['"]/g,(function(t,e,r){var n={};if("style"===e)r.replace(/\s*(.*?)\s*:\s*(.*?)\s*[;]/g,(function(t,e,r){n[e]=r}));else if("class"===e)for(var o=r.split(/\s+/),i=0,a=o.length;i<a;i++)n[o[i]]=null;c[e]=Object.keys(n).length?n:r}));var u=t.match(/>([\s\S]*)/)[1];u&&s.children.push({type:"text",text:u})}o.children.push(s),n.push(s),d.hasOwnProperty(l)||(o=s)}},a=0,l=r.length;a<l;a++)i();return{ast:e,nodes:n}},stringify:y},x=t.promises.readFile,k=function(){var t=a(n().mark((function t(e,r){var o,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(r,"utf-8");case 2:return o=t.sent,t.next=5,x(e,"utf-8");case 5:return i=t.sent,o=o.replace(/\/\*[\s\S]*?\*\//g,""),i=i.replace(/<!--[\s\S]*?-->/g,""),o=(o=o.replace(/\s{2,}/g," ").replace(/\s?([{},:;])\s?/g,(function(t,e){return e})).replace(/\(\s/,"(").replace(/\s\)/,")").trim()).replace(/url\(['"](.*?)['"]\)/g,(function(t,e){return'url("'.concat(e.replace(/;/g,"my-semicolon"),'")')})),t.abrupt("return",{html:i,css:o});case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),j=t.promises.writeFile,S=function(){var t=a(n().mark((function t(e,r){var o,i,a,l,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in o="",e){for(l in o+="".concat(i," {"),a=e[i])c=(c=a[l]).startsWith('url("data:image')?c.replace(/my-semicolon/,";"):c,o+="".concat(l,": ").concat(c,";");o+="}\r\n"}return t.next=4,j("".concat(r,"/raw-css.css"),o);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),O=e,E={id:function(t,e){return t.filter((function(t){return t.attrs.id===e}))},class:function(t,e){return t.filter((function(t){var r,n;return null===(r=t.attrs)||void 0===r||null===(n=r.class)||void 0===n?void 0:n.hasOwnProperty(e)}))},attribute:function(t,e,r){return t.filter((function(t){return t.attrs[e]===r}))},universal:function(t){return t},element:function(t,e){return t.filter((function(t){return t.tagName===e}))},child:function(t){for(var e=[],r=0,n=t.length;r<n;r++)Array.prototype.push.apply(e,t[r].children);return e},sibling:function(t){for(var e=[],r=0,n=t.length;r<n;r++)for(var o=t[r],i=o.parent.children,a=i.indexOf(o)+1,l=i.length;a<l;a++)e.push(i[a]);return e},descendant:function(t){for(var e=[],r=function t(e,r){for(var n=0,o=r.length;n<o;n++){var i=r[n];if("text"!==i.type){e.push(i);var a=i.children;a.length&&t(e,a)}}},n=0,o=t.length;n<o;n++){r(e,t[n].children)}return e},adjacent:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r],i=o.parent.children,a=i.indexOf(o),l=i[a+1];l&&e.push(l)}return e},"pseudo-class":function(t,e,r){var n=L[e];return n?n(t,r):[]},"pseudo-element":function(){}},L={"first-of-type":function(t){return[t[0]]},"last-of-type":function(t){return[t[t.length-1]]},before:function(t){return t},after:function(t){return t},visited:function(t){return t}},N=function t(e,r){for(var n=e,o=O.getNodes(r),i=0,a=o.length;i<a;i++){var l=o[i],s=l.type,u=l.name,f=l.value;if("combine"===s){var d=r.indexOf(",");n=c(new Set([].concat(c(n),c(t(e,r.slice(d+1))))));break}if(!(n=E[s](n,u,f,l)||[]).length)break}return n},P=/@keyframes\s([^{]+)\{(?:(?!\}\s*\})[\s\S])*\}\}/gi,_=function(t){return t=t.replace(P,(function(t,e){return""}))},z=(l(u={width:"w",height:"h",opacity:"opacity",padding:"shorthand-padding","padding-top":"pt","padding-right":"pr","padding-bottom":"pb","padding-left":"pl",margin:"shorthand-margin","margin-top":"mt","margin-right":"mr","margin-bottom":"mb","margin-left":"ml",top:"top",right:"right",bottom:"bottom",left:"left",border:"shorthand-border","border-radius":"rounded","border-width":"shorthand-border-width","border-top-width":"border-t","border-right-width":"border-r","border-bottom-width":"border-b","border-left-width":"border-l","border-top-left-radius":"rounded-tl","border-top-right-radius":"rounded-tr","border-bottom-left-radius":"rounded-bl","border-bottom-right-radius":"rounded-br","border-color":"shorthand-border-color","border-top-color":"border-t","border-right-color":"border-r","border-bottom-color":"border-b","border-left-color":"border-l","border-style":"shorthand-border-style","border-top-style":"border-t","border-right-style":"border-r","border-bottom-style":"border-b","border-left-style":"border-l","border-top":"shorthand-border-top","border-right":"shorthand-border-right","border-bottom":"shorthand-border-bottom","border-left":"shorthand-border-left",color:"text","font-size":"text","font-family":"font","background-color":"bg","min-width":"min-w",flex:"shorthand-flex","flex-grow":"flex-grow","flex-shrink":"flex-shrink","flex-basis":"flex-basis",background:"shorthand-background",animation:"shorthand-animation","animation-duration":"duration","animation-name":"animate",transition:"shorthand-transition","transition-duration":"duration","transition-property":"transition",font:"shorthand-font","line-height":"leading","z-index":"z","list-style-image":"list-image","list-style":"shorthand-list-style",content:"content",transform:"transform","font-weight":{100:"font-thin",200:"font-extra-light",300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold",900:"font-black"},position:{static:"static",absolute:"absolute",relative:"relative",sticky:"sticky",fixed:"fixed"},cursor:{auto:"cursor-auto",default:"cursor-default",pointer:"cursor-pointer",wait:"cursor-wait",text:"cursor-text",move:"cursor-move",help:"cursor-help","not-allowed":"cursor-not-allowed"},display:{block:"block","inline-block":"inline-block",inline:"inline",flex:"flex","inline-flex":"inline-flex",table:"table","inline-table":"inline-table","table-caption":"table-caption","table-cell":"table-cell","table-column":"table-column","table-column-group":"table-column-group","table-footer-group":"table-footer-group","table-header-group":"table-header-group","table-row-group":"table-row-group","table-row":"table-row","flow-root":"flow-root",grid:"grid","inline-grid":"inline-grid",contents:"contents","list-item":"list-item",none:"hidden"},float:{right:"float-right",left:"float-left",none:"float-none"},"justify-content":{"flex-start":"justify-start","flex-end":"justify-end",center:"justify-center","space-between":"justify-between","space-around":"justify-around","space-evenly":"justify-evenly"},"align-items":{"flex-start":"items-start","flex-end":"items-end",center:"items-center",baseline:"items-baseline",stretch:"items-stretch"},"flex-direction":{row:"flex-row","row-reverse":"flex-row-reverse",column:"flex-col","column-reverse":"flex-col-reverse"},"box-sizing":{"border-box":"box-border","content-box":"box-content"},"white-space":{normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre","pre-line":"whitespace-pre-line","pre-wrap":"whitespace-pre-wrap"},overflow:{auto:"overflow-auto",hidden:"overflow-hidden",visible:"overflow-visible",scroll:"overflow-scroll"},"overflow-x":{auto:"overflow-x-auto",hidden:"overflow-x-hidden",visible:"overflow-x-visible",scroll:"overflow-x-scroll"},"overflow-y":{auto:"overflow-y-auto",hidden:"overflow-y-hidden",visible:"overflow-y-visible",scroll:"overflow-y-scroll"},visibility:{visible:"visible",hidden:"invisible",collapse:"collapse"},"text-align":{left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"},"background-position":{bottom:"bg-bottom",center:"bg-center",left:"bg-left","left bottom":"bg-left-bottom","left top":"bg-left-top",right:"bg-right","right bottom":"bg-right-bottom","right top":"bg-right-top",top:"bg-top"},"background-repeat":{repeat:"bg-repeat","no-repeat":"bg-no-repeat","repeat-x":"bg-repeat-x","repeat-y":"bg-repeat-y",round:"bg-repeat-round",space:"bg-repeat-space"},"background-size":{auto:"bg-auto",cover:"bg-cover",contain:"bg-contain"},"text-decoration":{underline:"underline","line-through":"line-througn",none:"no-underline"}},"border-style",{solid:"border-solid",dashed:"border-dashed",dotted:"border-dotted",double:"border-double",hidden:"border-hidden",none:"border-none"}),l(u,"vertical-align",{baseline:"align-baseline",top:"align-top",middle:"align-middle",bottom:"align-bottom","text-top":"align-text-top","text-bottom":"align-text-bottom",sub:"align-sub",super:"align-super"}),l(u,"font-variant-numeric",{normal:"normal-nums",ordinal:"ordinal","slashed-zero":"slashed-zero","lining-nums":"lining-nums","oldstyle-nums":"oldstyle-nums","proportional-nums":"proportional-nums","tabular-nums":"tabular-nums","diagonal-fractions":"diagonal-fractions","stacked-fractions":"stacked-fractions"}),l(u,"list-style-type",{none:"list-none",disc:"list-disc",decimal:"list-decimal"}),l(u,"list-style-position",{inside:"list-inside",outside:"list-outside"}),l(u,"font-style",{italic:"italic",normal:"not-italic"}),l(u,"background-size",{auto:"bg-auto",cover:"bg-cover",contain:"bg-contain"}),l(u,"background-repeat",{repeat:"bg-repeat","no-repeat":"bg-no-repeat","repeat-x":"bg-repeat-x","repeat-y":"bg-repeat-y",round:"bg-repeat-round",space:"bg-repeat-space"}),l(u,"background-position",{top:"bg-top",right:"bg-right",bottom:"bg-bottom",left:"bg-left",center:"bg-center","left bottom":"bg-left-bottom","left top":"bg-left-top","right bottom":"bg-right-bottom","right top":"bg-right-top"}),l(u,"background-origin",{"border-box":"bg-origin-border","padding-box":"bg-origin-padding","content-box":"bg-origin-content"}),l(u,"background-clip",{"border-box":"bg-clip-border","padding-box":"bg-clip-padding","content-box":"bg-clip-content",text:"bg-clip-text"}),l(u,"background-attachment",{fixed:"bg-fixed",local:"bg-local",scroll:"bg-scroll"}),l(u,"transform-origin",{top:"origin-top",right:"origin-right",bottom:"origin-bottom",left:"origin-left",center:"origin-center","top-right":"origin-top-right","top-left":"origin-top-left","bottom-right":"origin-bottom-right","bottom-left":"origin-bottom-left"}),l(u,"flex-wrap",{wrap:"flex-wrap","wrap-reverse":"flex-wrap-reverse",nowrap:"flex-nowrap"}),u),A=r,C={stylesMap:z}.stylesMap,F=function(t,e,r,n){t[e]=t[e]||{},t[e][r]=n},G=function t(e,r,n,i,a,l){if(C[r]){n.startsWith('url("data:image')&&(n=n.replace(/my-semicolon/g,";"));var c="",s=C[r],u="object"===o(s),f=u?r:s,d=function(t){var e=[];return t.replace(/:([a-z]+)/g,(function(t,r){e.push("".concat(r,":"))})),e.length?e:[""]}(e);if(u){if(s[n])for(var p=0,h=d.length;p<h;p++)c+="".concat(d[p]).concat(s[n]," ");else F(l,e,r,n)}else{var g=A(r,n);if(g)for(var b=Object.keys(g),v=0,m=b.length;v<m;v++){var y=b[v],w=g[y];"unset"!==w&&t(e,y,w,i,a,l)}else if("content"===s){var x=n.match(/['"](.*?)['"]/)[1];if(x)for(var k=0,j=d.length;k<j;k++)c+="".concat(d[k]).concat(s,"-['").concat(x,"'] ")}else if("transform"===s)n.replace(/([a-z]+?)([A-Z]+)?\(([^,]+)(,.+)?\)/,(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;if(r){r=r.toLowerCase();for(var o=0,i=d.length;o<i;o++)c+="".concat(d[o]).concat(e,"-").concat(r,"-[").concat(n,"] ")}else for(var a=0,l=d.length;a<l;a++)c+="".concat(d[a]).concat(e,"-x-[").concat(n,"] ").concat(e,"-y-[").concat(n,"] ")}));else for(var S=0,O=d.length;S<O;S++)c+="".concat(d[S]).concat(s,"-[").concat(n,"] ")}a[f]={tailwindExp:c,specificity:i}}else F(l,e,r,n)},T=/@media([^{]*)\{(?:(?!\}\s*\})[\s\S])*\}\}/gi,I=e,M=N,W=_,q=G,Y=function(t){return t=t.replace(T,(function(t,e){return""}))},J=function(t,e,r){var n=e?"".concat(e).concat(r?"":" { @apply"," "):"";for(var o in t)n+="".concat(t[o].tailwindExp," ");return"".concat(n.slice(0,-1)).concat(r?"":" }")},D={deepClone:function(t){return JSON.parse(JSON.stringify(t))}}.deepClone,U=/}?(.*?){(.*?)}/g,Z=function(t,e,r){var n="",o={},i={};if(t=W(t),(t=Y(t)).replace(U,(function(t,n,a){if(a)if(r){var l=M(e,n);if(l.length){var c=I.getSpecificity(n),s={};a.replace(/(.*?):([^;]*);?/g,(function(t,e,r){q(n,e,r,c,s,o)}));for(var u=0,f=l.length;u<f;u++){var d=D(s),p=l[u],h=p.classMetadata;if(h)for(var g in d){var b=d[g];(!h[g]||h[g].specificity<=b.specificity)&&(h[g]=b)}else p.classMetadata=d}}}else{var v={},m=I.getSpecificity(n);a.replace(/(.*?):([^;]*);?/g,(function(t,e,r){q(n,e,r,m,v,o)}));var y=D(v),w=i[n];if(w)for(var x in y){var k=y[x];(!w[x]||w[x].specificity<=k.specificity)&&(w[x]=k)}else i[n]=y}})),r)for(var a=0,l=e.length;a<l;a++){var c=e[a],s=c.classMetadata,u=c.attrs;s&&(c.tailwindExp=J(s,u.rawClass,r))}else for(var f=Object.keys(i),d=0,p=f.length;d<p;d++){var h=f[d],g=i[h];if(Object.keys(g).length){var b=J(g,h,r);i[h].tailwindExp=b,n+="".concat(b,"\r\n")}}return{rawCss:o,expr:n}},$=t.promises.writeFile,B=w,H=k,K=S,Q=Z,R=function(t){t.children[0].children[0].children.push({type:"tag",attrs:{src:"https://cdn.tailwindcss.com"},parent:t.children[0].children[0],tagName:"script",children:[]})},V=function(){var t=a(n().mark((function t(e,r,o){var i,a,l,c,s,u,f,d,p,h,g,b=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=b.length>3&&void 0!==b[3]&&b[3],t.next=3,H(e,r);case 3:return a=t.sent,l=a.html,c=a.css,s=B.parse(l),u=s.ast,f=s.nodes,d=Q(c,f,i),p=d.rawCss,h=d.expr,t.next=10,$("".concat(o,"/index.css"),h);case 10:if(!Object.keys(p)){t.next=13;break}return t.next=13,K(p,o);case 13:if(!i){t.next=18;break}return R(u),g=B.stringify(u),t.next=18,$("".concat(o,"/index.html"),g);case 18:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();module.exports=V;
