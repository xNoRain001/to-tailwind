"use strict";var t=require("i-html-parser"),e=require("fs"),r=require("selector-specificity"),n=require("css-shorthand-parser");function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),l=new E(o||[]);return n(a,"_invoke",{value:k(t,r,l)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function p(){}function h(){}function b(){}var g={};s(g,a,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==e&&r.call(m,a)&&(g=m);var y=b.prototype=p.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,l){var c=f(t[n],t,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(u).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=j(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=b,n(y,"constructor",{value:b,configurable:!0}),n(b,"constructor",{value:h,configurable:!0}),h.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(y),s(y,c,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e,r,n,o,i,a){try{var l=t[i](a),c=l.value}catch(t){return void r(t)}l.done?e(c):Promise.resolve(c).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function l(t){a(i,n,o,l,c,"next",t)}function c(t){a(i,n,o,l,c,"throw",t)}l(void 0)}))}}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var f,d=e.promises.readFile,p=function(){var t=l(o().mark((function t(e,r){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(r,"utf-8");case 2:return n=t.sent,t.next=5,d(e,"utf-8");case 5:return i=t.sent,n=n.replace(/\/\*[\s\S]*?\*\//g,""),i=i.replace(/<!--[\s\S]*?-->/g,""),n=(n=(n=n.replace(/\s{2,}/g," ").replace(/\s?([{},:;])\s?/g,(function(t,e){return e})).replace(/\(\s/,"(").replace(/\s\)/,")").trim()).replace(/([^;])}/g,(function(t,e){return"".concat(e,";}")}))).replace(/data:(.*?)\)([\s;])/g,(function(t,e,r){return"data:".concat(e.replace(/;/g,"my-semicolon"),")").concat(r)})),t.abrupt("return",{html:i,css:n});case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),h=e.promises.writeFile,b=function(){var t=l(o().mark((function t(e,r){var n,i,a,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in n="",e){for(l in n+="".concat(i," {"),a=e[i])c=(c=a[l]).startsWith('url("data:image')?c.replace(/my-semicolon/,";"):c,n+="\r\n\t".concat(l,": ").concat(c,";");n+="\r\n}\r\n\r\n"}return t.next=4,h("".concat(r,"/raw-css.css"),n);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),g=r,v={id:function(t,e){return t.filter((function(t){return t.attrs.id===e}))},class:function(t,e){return t.filter((function(t){var r,n;return null===(r=t.attrs)||void 0===r||null===(n=r.class)||void 0===n?void 0:n.hasOwnProperty(e)}))},attribute:function(t,e,r){return t.filter((function(t){return t.attrs[e]===r}))},universal:function(t){return t},element:function(t,e){return t.filter((function(t){return t.tagName===e}))},child:function(t){for(var e=[],r=0,n=t.length;r<n;r++)Array.prototype.push.apply(e,t[r].children);return e},sibling:function(t){for(var e=[],r=0,n=t.length;r<n;r++)for(var o=t[r],i=o.parent.children,a=i.indexOf(o)+1,l=i.length;a<l;a++)e.push(i[a]);return e},descendant:function(t){for(var e=[],r=function t(e,r){for(var n=0,o=r.length;n<o;n++){var i=r[n];if("text"!==i.type){e.push(i);var a=i.children;a.length&&t(e,a)}}},n=0,o=t.length;n<o;n++){r(e,t[n].children)}return e},adjacent:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r],i=o.parent.children,a=i.indexOf(o),l=i[a+1];l&&e.push(l)}return e},"pseudo-class":function(t,e,r){var n=m[e];return n?n(t,r):[]},"pseudo-element":function(){}},m={"first-of-type":function(t){return[t[0]]},"last-of-type":function(t){return[t[t.length-1]]},before:function(t){return t},after:function(t){return t},visited:function(t){return t}},y=function t(e,r){for(var n=e,o=g.getNodes(r),i=0,a=o.length;i<a;i++){var l=o[i],c=l.type,u=l.name,f=l.value;if("combine"===c){var d=r.indexOf(",");n=s(new Set([].concat(s(n),s(t(e,r.slice(d+1))))));break}if(!(n=v[c](n,u,f,l)||[]).length)break}return n},w={stylesMap:(c(f={width:"w",height:"h",opacity:"opacity",padding:"shorthand-padding","padding-top":"pt","padding-right":"pr","padding-bottom":"pb","padding-left":"pl",margin:"shorthand-margin","margin-top":"mt","margin-right":"mr","margin-bottom":"mb","margin-left":"ml",top:"top",right:"right",bottom:"bottom",left:"left",border:"shorthand-border","border-radius":"rounded","border-width":"shorthand-border-width","border-top-width":"border-t","border-right-width":"border-r","border-bottom-width":"border-b","border-left-width":"border-l","border-top-left-radius":"rounded-tl","border-top-right-radius":"rounded-tr","border-bottom-left-radius":"rounded-bl","border-bottom-right-radius":"rounded-br","border-color":"shorthand-border-color","border-top-color":"border-t","border-right-color":"border-r","border-bottom-color":"border-b","border-left-color":"border-l","border-style":"shorthand-border-style","border-top-style":"border-t","border-right-style":"border-r","border-bottom-style":"border-b","border-left-style":"border-l","border-top":"shorthand-border-top","border-right":"shorthand-border-right","border-bottom":"shorthand-border-bottom","border-left":"shorthand-border-left",color:"text","font-size":"text","background-color":"bg","min-width":"min-w","min-height":"min-h","letter-spacing":"tracking",flex:"shorthand-flex","flex-grow":"grow","flex-shrink":"shrink","flex-basis":"basis",background:"shorthand-background",animation:"shorthand-animation","animation-duration":"duration","animation-delay":"delay","animation-name":"animate",transition:"shorthand-transition","transition-duration":"duration","transition-property":"transition",font:"shorthand-font","line-height":"leading","z-index":"z","list-style":"shorthand-list-style","background-image":"bg",content:"content","list-style-image":"list-image","font-weight":{100:"font-thin",200:"font-extra-light",300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold",900:"font-black"},position:{static:"static",absolute:"absolute",relative:"relative",sticky:"sticky",fixed:"fixed"},cursor:{auto:"cursor-auto",default:"cursor-default",pointer:"cursor-pointer",wait:"cursor-wait",text:"cursor-text",move:"cursor-move",help:"cursor-help","not-allowed":"cursor-not-allowed"},display:{block:"block","inline-block":"inline-block",inline:"inline",flex:"flex","inline-flex":"inline-flex",table:"table","inline-table":"inline-table","table-caption":"table-caption","table-cell":"table-cell","table-column":"table-column","table-column-group":"table-column-group","table-footer-group":"table-footer-group","table-header-group":"table-header-group","table-row-group":"table-row-group","table-row":"table-row","flow-root":"flow-root",grid:"grid","inline-grid":"inline-grid",contents:"contents","list-item":"list-item",none:"hidden"},float:{right:"float-right",left:"float-left",none:"float-none"},"justify-content":{"flex-start":"justify-start","flex-end":"justify-end",center:"justify-center","space-between":"justify-between","space-around":"justify-around","space-evenly":"justify-evenly"},"align-items":{"flex-start":"items-start","flex-end":"items-end",center:"items-center",baseline:"items-baseline",stretch:"items-stretch"},"flex-direction":{row:"flex-row","row-reverse":"flex-row-reverse",column:"flex-col","column-reverse":"flex-col-reverse"},"box-sizing":{"border-box":"box-border","content-box":"box-content"},"white-space":{normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre","pre-line":"whitespace-pre-line","pre-wrap":"whitespace-pre-wrap"},overflow:{auto:"overflow-auto",hidden:"overflow-hidden",visible:"overflow-visible",scroll:"overflow-scroll"},"overflow-x":{auto:"overflow-x-auto",hidden:"overflow-x-hidden",visible:"overflow-x-visible",scroll:"overflow-x-scroll"},"overflow-y":{auto:"overflow-y-auto",hidden:"overflow-y-hidden",visible:"overflow-y-visible",scroll:"overflow-y-scroll"},visibility:{visible:"visible",hidden:"invisible",collapse:"collapse"},"text-align":{left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"},"background-position":{bottom:"bg-bottom",center:"bg-center",left:"bg-left","left bottom":"bg-left-bottom","left top":"bg-left-top",right:"bg-right","right bottom":"bg-right-bottom","right top":"bg-right-top",top:"bg-top"},"background-repeat":{repeat:"bg-repeat","no-repeat":"bg-no-repeat","repeat-x":"bg-repeat-x","repeat-y":"bg-repeat-y",round:"bg-repeat-round",space:"bg-repeat-space"},"background-size":{auto:"bg-auto",cover:"bg-cover",contain:"bg-contain"},"text-decoration":{underline:"underline","line-through":"line-througn",none:"no-underline"}},"border-style",{solid:"border-solid",dashed:"border-dashed",dotted:"border-dotted",double:"border-double",hidden:"border-hidden",none:"border-none"}),c(f,"vertical-align",{baseline:"align-baseline",top:"align-top",middle:"align-middle",bottom:"align-bottom","text-top":"align-text-top","text-bottom":"align-text-bottom",sub:"align-sub",super:"align-super"}),c(f,"font-variant-numeric",{normal:"normal-nums",ordinal:"ordinal","slashed-zero":"slashed-zero","lining-nums":"lining-nums","oldstyle-nums":"oldstyle-nums","proportional-nums":"proportional-nums","tabular-nums":"tabular-nums","diagonal-fractions":"diagonal-fractions","stacked-fractions":"stacked-fractions"}),c(f,"list-style-type",{none:"list-none",disc:"list-disc",decimal:"list-decimal"}),c(f,"list-style-position",{inside:"list-inside",outside:"list-outside"}),c(f,"font-style",{italic:"italic",normal:"not-italic"}),c(f,"background-size",{auto:"bg-auto",cover:"bg-cover",contain:"bg-contain"}),c(f,"background-repeat",{repeat:"bg-repeat","no-repeat":"bg-no-repeat","repeat-x":"bg-repeat-x","repeat-y":"bg-repeat-y",round:"bg-repeat-round",space:"bg-repeat-space"}),c(f,"background-position",{top:"bg-top",right:"bg-right",bottom:"bg-bottom",left:"bg-left",center:"bg-center","left bottom":"bg-left-bottom","left top":"bg-left-top","right bottom":"bg-right-bottom","right top":"bg-right-top"}),c(f,"background-origin",{"border-box":"bg-origin-border","padding-box":"bg-origin-padding","content-box":"bg-origin-content"}),c(f,"background-clip",{"border-box":"bg-clip-border","padding-box":"bg-clip-padding","content-box":"bg-clip-content",text:"bg-clip-text"}),c(f,"background-attachment",{fixed:"bg-fixed",local:"bg-local",scroll:"bg-scroll"}),c(f,"transform-origin",{top:"origin-top",right:"origin-right",bottom:"origin-bottom",left:"origin-left",center:"origin-center","top right":"origin-top-right","top left":"origin-top-left","bottom right":"origin-bottom-right","bottom left":"origin-bottom-left"}),c(f,"flex-wrap",{wrap:"flex-wrap","wrap-reverse":"flex-wrap-reverse",nowrap:"flex-nowrap"}),f),unsupportedPseudoClasses:{link:null}},x=n,k=w.stylesMap,j=w.unsupportedPseudoClasses,L=function(t,e,r,n){t[e]=t[e]||{},t[e][r]=n},S={translateX:function(t,e,r){var n="",o="";e.startsWith("-")&&(e=e.slice(1),o="-");for(var i=0,a=r.length;i<a;i++)n+="".concat(r[i]).concat(o).concat(t,"-[").concat([e],"] ");return n}};S.translateY=S.scaleX=S.scaleY=S.translateX;var E=function t(e,r,n,o,a,l){var c=S[r];if(k[r]||c){if(n.includes("data:"))return n=n.replace(/my-semicolon/g,";"),void L(l,e,r,n);var s="",u=k[r],f="object"===i(u),d=function(t,e,r,n){for(var o=[],i=e.split(","),a=function(){var e=i[l];e.replace(/:([a-z]+)/g,(function(i,a){j.hasOwnProperty(a)?L(t,e,r,n):o.push("".concat(a,":"))}))},l=0,c=i.length;l<c;l++)a();return o.length?o:[""]}(l,e,r,n);if(f){if(u[n])for(var p=0,h=d.length;p<h;p++)s+="".concat(d[p]).concat(u[n]," ");else L(l,e,r,n)}else{var b=x(r,n);if(b)for(var g=Object.keys(b),v=0,m=g.length;v<m;v++){var y=g[v],w=b[y];"unset"!==w&&t(e,y,w,o,a,l)}else if(c){var E=r.match(/[a-z]+/)[0],O=r.match(/[A-Z]+/)[0].toLowerCase();s+=c("".concat(E,"-").concat(O),n,d)}else if("content"===r)for(var P=0,_=d.length;P<_;P++){var N=n.match(/['"](.*?)['"]/)[1];if(N)for(var A=0,z=d.length;A<z;A++)s+="".concat(d[A],"content-['").concat(N,"'] ")}else for(var C=0,F=d.length;C<F;C++)s+="".concat(d[C]).concat(u,"-[").concat(n,"] ")}s=s.slice(0,-1),a[r]={tailwindExp:s,specificity:o}}else L(l,e,r,n)},O=/@keyframes\s([^{]+)\{(?:(?!\}\s*\})[\s\S])*\}\}/gi,P=/@media([^{]*)\{(?:(?!\}\s*\})[\s\S])*\}\}/gi,_={parseKeyframes:function(t){return t=t.replace(O,(function(t,e){return""}))},parseMediaQuery:function(t){return t=t.replace(P,(function(t,e){return""}))}},N=r,A=y,z=E,C=function(t,e,r){var n="".concat(e).concat(r?"":" {\r\n\t@apply"," "),o="";for(var i in t)o+="".concat(t[i].tailwindExp," ");return" "===o?"":"".concat((n+=o).slice(0,-1)).concat(r?"":"\r\n}\r\n\r\n")},F={deepClone:function(t){return JSON.parse(JSON.stringify(t))}}.deepClone,G=_.parseKeyframes,M=_.parseMediaQuery,T=/}?(.*?){(.*?)}/g,I=function(t,e,r){var n="",o={},i={};if(t=G(t),(t=M(t)).replace(T,(function(t,n,a){if(a)if(r){var l=A(e,n);if(l.length){var c=N.getSpecificity(n),s={};a.replace(/(.*?):([^;]*);?/g,(function(t,e,r){z(n,e,r,c,s,o)}));for(var u=0,f=l.length;u<f;u++){var d=F(s),p=l[u],h=p.classMetadata;if(h)for(var b in d){var g=d[b];(!h[b]||h[b].specificity<=g.specificity)&&(h[b]=g)}else p.classMetadata=d}}}else{var v={},m=N.getSpecificity(n);a.replace(/(.*?):([^;]*);?/g,(function(t,e,r){z(n,e,r,m,v,o)}));var y=F(v),w=i[n];if(w)for(var x in y){var k=y[x];(!w[x]||w[x].specificity<=k.specificity)&&(w[x]=k)}else i[n]=y}})),r)for(var a=0,l=e.length;a<l;a++){var c=e[a],s=c.classMetadata,u=c.attrs;s&&(c.tailwindExp=C(s,u.rawClass,r))}else for(var f=Object.keys(i),d=0,p=f.length;d<p;d++){var h=f[d],b=i[h];if(Object.keys(b).length){var g=C(b,h,r);i[h].tailwindExp=g,n+="".concat(g)}}return{rawCss:o,expr:n}},q=t,Y=e.promises.writeFile,X=p,J=b,K=I,Q=function(t){t.children[0].children[0].children.push({type:"tag",attrs:{src:"https://cdn.tailwindcss.com"},parent:t.children[0].children[0],tagName:"script",children:[]})},W=function(){var t=l(o().mark((function t(e,r,n){var i,a,l,c,s,u,f,d,p,h,b,g=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=g.length>3&&void 0!==g[3]&&g[3],t.next=3,X(e,r);case 3:if(a=t.sent,l=a.html,c=a.css,s=q.parse(l),u=s.ast,f=s.nodes,d=K(c,f,i),p=d.rawCss,h=d.expr,!i){t.next=15;break}return Q(u),b=q.stringify(u),t.next=13,Y("".concat(n,"/index.html"),b);case 13:t.next=17;break;case 15:return t.next=17,Y("".concat(n,"/index.css"),h);case 17:if(!Object.keys(p).length){t.next=20;break}return t.next=20,J(p,n);case 20:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();module.exports=W;
